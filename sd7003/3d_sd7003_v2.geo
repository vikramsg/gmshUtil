//
nu =  51;
nl = 46;
nf = 38;
nbl =  9;
nw =  12;

sru = 1.00;
srl = 4;
srf = 1.01;
srbl = 1.25;
srw = 1.04;

//nu = 70;
//nl = 50;
//nf = 30;
//nbl = 6;
//nw = 10;

//sru = 1.00;
//srl = 2;
//srf = 1.02;
//srbl = 1;
//srw = 1.00;

Point(1) = {1.000000,0.000000, 0.0, 1.0};
Point(2) = {0.996810,0.000310, 0.0, 1.0};
Point(3) = {0.987450,0.001320, 0.0, 1.0};
Point(4) = {0.972350,0.003100, 0.0, 1.0};
Point(5) = {0.951930,0.005470, 0.0, 1.0};
Point(6) = {0.926390,0.008240, 0.0, 1.0};
Point(7) = {0.896000,0.011390, 0.0, 1.0};
Point(8) = {0.861120,0.014940, 0.0, 1.0};
Point(9) = {0.822240,0.018840, 0.0, 1.0};
Point(10) = {0.779850,0.023040, 0.0, 1.0};
Point(11) = {0.734490,0.027440, 0.0, 1.0};
Point(12) = {0.686730,0.031970, 0.0, 1.0};
Point(13) = {0.637170,0.036490, 0.0, 1.0};
Point(14) = {0.586410,0.040860, 0.0, 1.0};
Point(15) = {0.534990,0.044940, 0.0, 1.0};
Point(16) = {0.483500,0.048590, 0.0, 1.0};
Point(17) = {0.432490,0.051710, 0.0, 1.0};
Point(18) = {0.382500,0.054150, 0.0, 1.0};
Point(19) = {0.334050,0.055810, 0.0, 1.0};
Point(20) = {0.287600,0.056580, 0.0, 1.0};
Point(21) = {0.243580,0.056390, 0.0, 1.0};
Point(22) = {0.202400,0.055180, 0.0, 1.0};
Point(23) = {0.164420,0.052920, 0.0, 1.0};
Point(24) = {0.129930,0.049610, 0.0, 1.0};
Point(25) = {0.099210,0.045260, 0.0, 1.0};
Point(26) = {0.072440,0.039930, 0.0, 1.0};
Point(27) = {0.049780,0.033720, 0.0, 1.0};
Point(28) = {0.031300,0.026770, 0.0, 1.0};
Point(29) = {0.017020,0.019320, 0.0, 1.0};
Point(30) = {0.006970,0.011720, 0.0, 1.0};
Point(31) = {0.001270,0.004380, 0.0, 1.0};
Point(32) = {0.000250,-0.001860, 0.0, 1.0};
Point(33) = {0.004570,-0.007410, 0.0, 1.0};
Point(34) = {0.014080,-0.012850, 0.0, 1.0};
Point(35) = {0.028390,-0.017590, 0.0, 1.0};
Point(36) = {0.047630,-0.021410, 0.0, 1.0};
Point(37) = {0.071820,-0.024380, 0.0, 1.0};
Point(38) = {0.100730,-0.026600, 0.0, 1.0};
Point(39) = {0.134070,-0.028090, 0.0, 1.0};
Point(40) = {0.171500,-0.028880, 0.0, 1.0};
Point(41) = {0.212680,-0.029000, 0.0, 1.0};
Point(42) = {0.257190,-0.028520, 0.0, 1.0};
Point(43) = {0.304560,-0.027520, 0.0, 1.0};
Point(44) = {0.354260,-0.026080, 0.0, 1.0};
Point(45) = {0.405720,-0.024280, 0.0, 1.0};
Point(46) = {0.458370,-0.022170, 0.0, 1.0};
Point(47) = {0.511610,-0.019800, 0.0, 1.0};
Point(48) = {0.564840,-0.017230, 0.0, 1.0};
Point(49) = {0.617480,-0.014500, 0.0, 1.0};
Point(50) = {0.668980,-0.011670, 0.0, 1.0};
Point(51) = {0.718830,-0.008870, 0.0, 1.0};
Point(52) = {0.766440,-0.006280, 0.0, 1.0};
Point(53) = {0.811180,-0.004030, 0.0, 1.0};
Point(54) = {0.852410,-0.002200, 0.0, 1.0};
Point(55) = {0.889570,-0.000820, 0.0, 1.0};
Point(56) = {0.922100,0.000080, 0.0, 1.0};
Point(57) = {0.949520,0.000520, 0.0, 1.0};
Point(58) = {0.971340,0.000570, 0.0, 1.0};
Point(59) = {0.987180,0.000370, 0.0, 1.0};
Point(60) = {0.996790,0.000110, 0.0, 1.0};
Point(61) = {1.000000,-0.000000, 0.0, 1.0};
Point(62) = {1.005001,0.049749, 0.0, 1.0};
Point(63) = {1.001811,0.050059, 0.0, 1.0};
Point(64) = {0.993119,0.050998, 0.0, 1.0};
Point(65) = {0.978245,0.052751, 0.0, 1.0};
Point(66) = {0.957517,0.055157, 0.0, 1.0};
Point(67) = {0.931634,0.057964, 0.0, 1.0};
Point(68) = {0.901099,0.061129, 0.0, 1.0};
Point(69) = {0.866145,0.064687, 0.0, 1.0};
Point(70) = {0.827205,0.068593, 0.0, 1.0};
Point(71) = {0.784732,0.072801, 0.0, 1.0};
Point(72) = {0.739271,0.077211, 0.0, 1.0};
Point(73) = {0.691376,0.081754, 0.0, 1.0};
Point(74) = {0.641598,0.086294, 0.0, 1.0};
Point(75) = {0.590547,0.090689, 0.0, 1.0};
Point(76) = {0.538746,0.094799, 0.0, 1.0};
Point(77) = {0.486810,0.098480, 0.0, 1.0};
Point(78) = {0.435255,0.101633, 0.0, 1.0};
Point(79) = {0.384594,0.104106, 0.0, 1.0};
Point(80) = {0.335344,0.105793, 0.0, 1.0};
Point(81) = {0.287931,0.106579, 0.0, 1.0};
Point(82) = {0.242769,0.106383, 0.0, 1.0};
Point(83) = {0.200216,0.105132, 0.0, 1.0};
Point(84) = {0.160593,0.102773, 0.0, 1.0};
Point(85) = {0.124096,0.099268, 0.0, 1.0};
Point(86) = {0.090893,0.094563, 0.0, 1.0};
Point(87) = {0.061046,0.088614, 0.0, 1.0};
Point(88) = {0.034489,0.081324, 0.0, 1.0};
Point(89) = {0.011055,0.072488, 0.0, 1.0};
Point(90) = {-0.009389,0.061777, 0.0, 1.0};
Point(91) = {-0.028788,0.046759, 0.0, 1.0};
Point(92) = {-0.047349,0.016945, 0.0, 1.0};
Point(93) = {-0.047938,-0.015198, 0.0, 1.0};
Point(94) = {-0.026067,-0.046689, 0.0, 1.0};
Point(95) = {-0.005861,-0.058702, 0.0, 1.0};
Point(96) = {0.016012,-0.066034, 0.0, 1.0};
Point(97) = {0.039955,-0.070817, 0.0, 1.0};
Point(98) = {0.066983,-0.074145, 0.0, 1.0};
Point(99) = {0.097765,-0.076512, 0.0, 1.0};
Point(100) = {0.132469,-0.078064, 0.0, 1.0};
Point(101) = {0.170932,-0.078877, 0.0, 1.0};
Point(102) = {0.212905,-0.078999, 0.0, 1.0};
Point(103) = {0.258008,-0.078513, 0.0, 1.0};
Point(104) = {0.305828,-0.077504, 0.0, 1.0};
Point(105) = {0.355868,-0.076054, 0.0, 1.0};
Point(106) = {0.407600,-0.074245, 0.0, 1.0};
Point(107) = {0.460489,-0.072125, 0.0, 1.0};
Point(108) = {0.513931,-0.069746, 0.0, 1.0};
Point(109) = {0.567342,-0.067167, 0.0, 1.0};
Point(110) = {0.620156,-0.064428, 0.0, 1.0};
Point(111) = {0.671776,-0.061592, 0.0, 1.0};
Point(112) = {0.721613,-0.058792, 0.0, 1.0};
Point(113) = {0.769069,-0.056211, 0.0, 1.0};
Point(114) = {0.813554,-0.053974, 0.0, 1.0};
Point(115) = {0.854457,-0.052158, 0.0, 1.0};
Point(116) = {0.891204,-0.050793, 0.0, 1.0};
Point(117) = {0.923202,-0.049908, 0.0, 1.0};
Point(118) = {0.949981,-0.049478, 0.0, 1.0};
Point(119) = {0.971066,-0.049429, 0.0, 1.0};
Point(120) = {0.986145,-0.049619, 0.0, 1.0};
Point(121) = {0.995078,-0.049861, 0.0, 1.0};
Point(122) = {0.998288,-0.049971, 0.0, 1.0};
Point(124) = {1.2,0.06, 0.0, 1.0};
Point(125) = {1.2,-0.06, 0.0, 1.0};
Point(126) = {1.2,0, 0.0, 1.0};


Spline(1) = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57};
Split Line(1) {22};
Delete {
  Line{3};
}
Spline(4) = {3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 1};
Split Line(4) {35};
Delete {
  Line{5};
}

Spline(7) = {3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58};

Split Line(7) {22};
Split Line(9) {35};

Delete {
  Line{8, 11};
}

BSpline(12) = {62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122};

Split Line(12) {83};
Split Line(14) {95};
Line(17) = {83, 22};
Line(18) = {35, 95};
Line(19) = {62, 1};
Line(20) = {1, 122};
Line Loop(21) = {13, 17, -2, -19};
Plane Surface(22) = {21};
Line Loop(23) = {15, -18, -10, -17};
Plane Surface(24) = {23};
Line Loop(25) = {16, -20, -6, 18};
Plane Surface(26) = {25};
Line(27) = {62, 124};
Line(28) = {1, 126};
Line(29) = {122, 125};
Line(30) = {125, 126};
Line(31) = {126, 124};
Line Loop(32) = {19, 28, 31, -27};
Plane Surface(33) = {32};
Line Loop(34) = {20, 29, 30, -28};
Plane Surface(35) = {34};
Transfinite Line {2, 13} = nu Using Progression sru;
Transfinite Line {6, 16} = nl Using Bump 1/srl;
Transfinite Line {10} = nf Using Progression 1/srf;
//Transfinite Line {15} = nf Using Progression 1/1.00;
Transfinite Line {15} = nf Using Progression 1/srf;
Transfinite Line {18, 20} = nbl Using Progression srbl;
Transfinite Line {17, 19} = nbl Using Progression 1/srbl;
Transfinite Line {30, 31} = nbl Using Progression 1;
Transfinite Line {29, 28, 27} = nw Using Progression srw;
Transfinite Surface {22};
Transfinite Surface {24};
Transfinite Surface {26};
Transfinite Surface {35};
Transfinite Surface {33};
Recombine Surface {24, 22, 26, 35, 33};

ffSize =  4.0;  
Point(127) = {0, 10, 0,  ffSize};
Point(128) = {0, -10, 0, ffSize};
Point(129) = {20, 10, 0, ffSize};
Point(130) = {20, -10, 0,ffSize};
Point(131) = {0, -0, -0, ffSize};
Circle(36) = {127, 131, 128};
Line(37) = {127, 129};
Line(38) = {128, 130};
Line(39) = {130, 129};


nfSize =0.25  ;  // near-field mesh size

// Interior box of mesh
Point(201) = {-2.0, -0.80 , 0, nfSize};
Point(202) = { 5.4, -0.80 , 0, nfSize};
Point(203) = { 5.4,  0.80 , 0, nfSize};
Point(204) = {-2.0,  0.80 , 0, nfSize};
Line(201) = {201, 202};
Line(202) = {202, 203};
Line(203) = {203, 204};
Line(204) = {204, 201};

Line Loop(40) = {201, 202, 203, 204, 36, 38, 39, -37}; // Inner Exterior
Line Loop(41) = {13, 15, 16, 29, 30, 31, -27};
Line Loop(50) = {201, 202, 203, 204}; // Inner Exterior
Plane Surface(42) = {41, -50};
Plane Surface(43) = {40};

Recombine Surface {22, 24, 26, 33, 35, 42, 43};
Extrude {0,0, 0.2}
{
    Surface{22, 24, 26, 33, 35, 42, 43};
    Layers{8};
    Recombine;
}

Physical Surface("char")  = {400, 404, 408, 412};
Physical Surface("wall")   = {221, 243, 265 };
Physical Volume("fluid")   = {1, 2, 3, 4, 5, 6, 7};
Physical Surface("lo")   = {22, 24, 26, 33, 35, 42, 43};
Physical Surface("hi")   = {248, 270, 226, 371, 292, 314, 413};

